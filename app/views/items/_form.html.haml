.container

  = form_with model: @item, local: true , id: "items-form" do |f|

    - if @item.errors.any?
      .SettingitemForm__errors
        %ul
          - @item.errors.full_messages.each do |message|
            %li.error= message

    #image-box
      #previews
        - if @item.persisted?
          - @item.images.each_with_index do |image, i|
            = image_tag image.image.url, data: { index: i }, width: "100", height: '100'

        -# =f.label :images, class:"image-field", for: "item_images_attributes_0_image" do
        -# .iconnooya
        -#   .iconnooya2
        -#     = icon "fas","camera"

      %span.product_up 最大10枚までアップロードできます

      =f.fields_for :images do |i|
        .js-file_group{"data-index" => "#{i.index}"}
          =i.file_field :image, class: 'js-file'
          %span.js-remove 削除
        - if @item.persisted?
          = i.check_box :_destroy, data:{ index: i.index }, class: 'hidden-destroy'

      - if @item.persisted?
        .js-file_group{"data-index" => "#{@item.images.count}"}
          = file_field_tag :image, name: "item[images_attributes][#{@item.images.count}][image]", class: 'js-file'
          %span.js-remove 削除

    .form-group
      .underline
    .form-group
      .onegai 以下の欄に必要な情報をご入力の上「出品する」を押してください。

    .form-group
      .temporaryclass
        = f.label :title do
          商品名
          .icon 必須
          -# - if @item.errors.include?(:title)
          -#   %span.error= @item.errors.full_messages_for(:title).first
          -#   = f.text_field :title, placeholder: "40文字まで", class: "title error-field"
          -# - else
          -#   %div
        = f.text_field :title, maxlength: "40", placeholder: "40文字まで", class: "title"

    .form-group
      .temporaryclass
        = f.label :text, class:"setumei" do
          商品の説明
          .icon 必須
        = f.text_area :text, maxlength: "1000", placeholder: "商品の説明（1000文字以内）（色、素材、重さ、定価、注意点など）", class: "product"
      .underline

    .form-group
      = f.hidden_field :stock, value:1

    .supplement 商品の詳細
    .form-group
      .temporaryclass
        = f.label :category_id do
          カテゴリー
          .icon 必須
        .categorySelect
          - if action_name == "new" || action_name == "create"
            .category-parent
              = f.select :category_id, options_for_select(@category_parents.collect{ |c| [c.name, c.id]}), {include_blank: '選択してください'}, class: 'category', id: 'parent_category'
          - else
            .category-parent
              = f.select :category_id, options_for_select(@category_parents.collect{ |c| [c.name, c.id,  {"data-category": c.id}]}, @grandparent_category.id), {include_blank: '選択してください'}, class: "category", id: "parent_category"
            .catagory-children
              = f.select :category_id, options_for_select(@child_categories.collect{ |c| [c.name, c.id, {"data-category": c.id}]}, @child_category.id), {include_blank: "選択してください"}, class: "category", id: "child_category"
            .catagory-grandchildren
              = f.select :category_id, options_for_select(@grandchild_categories.collect{ |c| [c.name, c.id, {"data-category": c.id}]}, @category.id), {include_blank: "選択してください"}, class: "category", id: "grandchild_category"
    .form-group
      .temporaryclass
        = f.label :brand do
          ブランド名
          .icon2 任意
        = f.text_field :brand, placeholder: "例）シャネル", class: "brand"

    .form-group
      .temporaryclass
        =f.label :condition do
          商品の状態
          .icon 必須
        -# =f.text_field :condition, class: "condition"
        %select{name: "item[condition]", class: "condition", id: "item_condition"}
          %option 選択してくださいませ
          %option{value:'1'} 新品同様
          %option{value:'2'} 美品
          %option{value:'3'} 普通
          %option{value:'4'} やや汚れあり
          %option{value:'5'} あまりよろしくない
      .underline

    .supplement 配送について
    .form-group
      .temporaryclass
        =f.label :leadtime do
          発送の日数
          .icon 必須
        -# =f.number_field :leadtime, class: "leadtime"
        -# =f.select :leadtime, { include_blank: '選択してください'}, class: "leadtime"
        -# %select{name: "item[leadtime]", class: "leadtime"}
        -#   %option 選択してくださいませ
        -#   %option{value:'1'} １日
        -#   %option{value:'2'} ２〜６日
        -#   %option{value:'3'} １週間以上
        -# = f.select :leadtime, { "1日": 1, "2": 1, "3": 3 }, { include_blank: '選択してください' }, class: "leadtime"
        =f.select :leadtime, {'１日': 1, "2-6日": 2, "1週間": 3}, { include_blank: '選択してください'}, class: "leadtime"
        
    .form-group
      .temporaryclass
        = f.label :derivery_id do
          配送方法
          .icon 必須
        = f.collection_select :delivery_id, Delivery.all, :id, :name, { include_blank: '選択してください' }, class: "delivery"
    .form-group
      .underline

    .supplement 価格(¥300~¥9,999,999)
    .form-group
      .temporaryclass
        = f.label :price do
          販売価格
          .icon 必須
        = f.number_field :price, class: "price"
        = f.label :fee do
          販売手数料(10%)
        %span.fee-span
        = f.label :profit do
          販売利益
        %span.profit-span
    .underline

    .form-group
      .submit
        =f.submit '出品する', class: 'submit-btn'

    -# .form-group
    -#   .draft
    -#     =f.submit '下書きに保存', class: 'draft-btn'

    -# ドラッグアンドドロップの跡
    -# #file-dropzone.dropzone{action: "/items", "drop-zone" => ""}
    -#   = f.hidden_field :images
    -#   %ul.visualizacao.sortable.dropzone-previews{:style => "border:1px solid #000"}
    -#   .preview
    -#     %li
    -#       %div
    -#         .dz-preview.dz-file-preview
    -#         %img{"data-dz-thumbnail" => ""}/
    -#         .dz-progress
    -#           %span.dz-upload{"data-dz-uploadprogress" => ""}
    -#         .dz-success-mark
    -#           %span ✔
    -#         .dz-error-mark
    -#           %span ✘
    -#         .dz-error-message
    -#           %span{"data-dz-errormessage" => ""}
